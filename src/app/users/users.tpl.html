<div class="content" ng-controller="UsersCtrl as usersCtrl">
  <accordion>
    <accordion-group heading="Create User" is-open="usersCtrl.open">
      <form role="form" name="CreateUserForm" ng-submit="usersCtrl.createUser(usersCtrl.user, CreateUserForm)" novalidate>
        <!-- Email -->
        <div class="form-group has-feedback" showError>
          <label for="email">Email</label>
          <input ng-model="usersCtrl.user.email" ng-model-options="{ updateOn: 'blur' }" name="email" type="email" class="form-control" placeholder="Email" required>
          <icons></icons>
          <!-- Errors -->
          <errors>
            <p class="text-danger" ng-show="CreateUserForm.email.$error.required">Email required.</p>
            <p class="text-danger" ng-show="CreateUserForm.email.$invalid">Invaild email.</p>
            <p class="text-danger" ng-show="CreateUserForm.email.$error.serverMessages" ng-repeat="message in CreateUserForm.email.$error.serverMessages">{{message}}</p>
          </errors>
        </div>
        <!-- Password -->
        <div class="form-group has-feedback" showError>
          <label for="password">Password</label>
          <input ng-model="usersCtrl.user.password" ng-model-options="{ updateOn: 'blur' }" name="password" type="password" class="form-control" placeholder="Password" required>
          <icons></icons>
          <!-- Errors -->
          <errors>
            <p class="text-danger" ng-show="CreateUserForm.password.$error.required">
              Password required.</p>
            <p class="text-danger" ng-show="CreateUserForm.password.$error.serverMessages" ng-repeat="message in CreateUserForm.password.$error.serverMessages">{{message}}</p>
          </errors>
        </div>
        <!-- Confirm Password -->
        <div class="form-group has-feedback" showError>
          <label for="password">Confirm password</label>
          <input ng-model="usersCtrl.user.confirmPassword" ng-model-options="{ updateOn: 'blur' }" name="confirmPassword" type="password" class="form-control" placeholder="Confirm Password" required>
          <icons></icons>
          <!-- Errors -->
          <errors>
            <p class="text-danger" ng-show="CreateUserForm.confirmPassword.$error.required">
              Confirm Password required.</p>
            <p class="text-danger" ng-show="user.password !== user.confirmPassword">Passwords must match.</p>
            <p class="text-danger" ng-show="CreateUserForm.confirmPassword.$error.serverMessages" ng-repeat="message in CreateUserForm.confirmPassword.$error.serverMessages">{{message}}</p>
          </errors>
        </div>
        <!-- Submit Button -->
        <button type="submit" class="btn btn-default">Submit</button>
        <!-- Cancel Button -->
        <button type="button" class="pull-right btn btn-default" ng-click="usersCtrl.resetForm(CreateUserForm)">Cancel</button>
      </form>
    </accordion-group>
  </accordion>

  <ul class="list-group">
    <div class="list-group-item">
      <h3 class="list-group-item-heading">Users</h3>
    </div>
    <li class="list-group-item" ng-repeat="user in usersCtrl.users">
      {{user.email}}
      <i class="fa fa-times pull-right" ng-click="usersCtrl.deleteUser(user.email, user.id, $index)"></i>
    </li>
  </ul>
</div>
